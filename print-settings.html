<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Print Settings</title>
  <style>
    :root {
      --titlebar-height: 36px;
      --titlebar-bg: #F9F5F0;
      --titlebar-text: #444;
      --brand-color: #EA580C; /* Updated brand color from your SVG */
      --body-bg: #ffffff;
      --border-color: #d1d1d1;
      --input-focus-glow: rgba(234, 88, 12, 0.2);
      --text-color: #333;
      --button-secondary-bg: #f0f0f0;
      --button-secondary-text: #555;
      --button-secondary-border: #ccc;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: var(--body-bg);
      color: var(--text-color);
      padding: 20px;
      padding-top: calc(var(--titlebar-height) + 20px);
    }

    /* --- Styled Title Bar (Matches Main Window) --- */
    #custom-title-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--titlebar-height);
      background-color: var(--titlebar-bg);
      display: flex;
      justify-content: space-between;
      align-items: center;
      -webkit-app-region: drag;
    }

    /* --- NEW: Logo and Title Styling --- */
    .title-logo {
      display: flex;
      align-items: center;
      padding-left: 12px;
    }

    .title-text {
      font-weight: 600;
      font-size: 14px;
      margin-left: 8px;
      color: var(--titlebar-text);
    }

    #close-btn {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      background: transparent;
      border: none;
      color: var(--titlebar-text);
      width: 46px;
      height: var(--titlebar-height);
      cursor: pointer;
      transition: background-color 0.2s, color 0.2s;
      outline: none;
      -webkit-app-region: no-drag;
    }

    #close-btn:hover {
      background-color: #E81123;
      color: #fff;
    }
    
    /* --- Modern Form Styling (Unchanged) --- */
    .form-wrapper {
      max-width: 360px;
      margin: 20px auto;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 120px 1fr;
      gap: 18px 10px;
      align-items: center;
    }

    label {
      font-weight: 600;
      font-size: 14px;
      justify-self: end;
    }

    input[type="number"] {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      box-sizing: border-box;
      font-size: 14px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: var(--brand-color);
      box-shadow: 0 0 0 3px var(--input-focus-glow);
    }

    /* --- Styled Buttons (Unchanged) --- */
    .button-group {
      margin-top: 30px;
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }

    .button-group button {
      padding: 10px 24px;
      border: 1px solid transparent;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: opacity 0.2s;
    }

    .button-group button:hover {
      opacity: 0.9;
    }

    #submit-btn {
      background-color: var(--brand-color);
      color: white;
    }

    #cancel-btn {
      background-color: var(--button-secondary-bg);
      color: var(--button-secondary-text);
      border-color: var(--button-secondary-border);
    }
  </style>
</head>
<body>
  
  <div id="custom-title-bar">
    <div class="title-logo">
      <svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M11.3255 1.5L9.59708 3.2284C9.18401 3.64982 8.95264 4.2164 8.95264 4.8065C8.95264 5.39661 9.18401 5.96319 9.59708 6.38461L10.9497 7.73727C11.3712 8.15034 11.9378 8.38171 12.5279 8.38171C13.118 8.38171 13.6845 8.15034 14.106 7.73727L15.8344 6.00887" stroke="#EA580C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M10.574 11.2692L1.78168 2.47693C1.48175 2.7708 1.24347 3.12156 1.0808 3.50867C0.918138 3.89578 0.834351 4.31146 0.834351 4.73136C0.834351 5.15126 0.918138 5.56694 1.0808 5.95405C1.24347 6.34117 1.48175 6.69193 1.78168 6.9858L7.26748 12.4716C7.79351 12.9976 8.77044 12.9976 9.37162 12.4716L10.574 11.2692ZM10.574 11.2692L15.8343 16.5296" stroke="#EA580C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M0.879944 16.3793L5.68941 11.645" stroke="#EA580C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M13.5799 3.75446L8.31952 9.0148" stroke="#EA580C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span class="title-text">Print Settings</span>
    </div>
    <button id="close-btn" title="Close">
        <svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.75.75 0 1 1 1.06 1.06L9.06 8l3.22 3.22a.75.75 0 1 1-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 0 1-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06z"/></svg>
    </button>
  </div>
  
  <div class="form-wrapper">
    <form id="print-form">
      <div class="form-grid">
        <label for="width">Width (mm):</label>
        <input type="number" id="width" required>
        
        <label for="height">Height (mm):</label>
        <input type="number" id="height" required>
        
        <label for="scaleFactor">Scale Factor:</label>
        <input type="number" id="scaleFactor" step="0.1" min="0.1" max="2.0" required>
      </div>
      
      <div class="button-group">
        <button type="button" id="cancel-btn">Cancel</button>
        <button type="submit" id="submit-btn">Save</button>
      </div>
    </form>
  </div>

  <script>
    const form = document.getElementById('print-form');
    const cancelBtn = document.getElementById('cancel-btn');
    const closeBtn = document.getElementById('close-btn');

    document.addEventListener('DOMContentLoaded', () => {
      const initialSettings = window.settingsApi.getInitialSettings();
      if (initialSettings.width) document.getElementById('width').value = initialSettings.width;
      if (initialSettings.height) document.getElementById('height').value = initialSettings.height;
      if (initialSettings.scaleFactor) document.getElementById('scaleFactor').value = initialSettings.scaleFactor;
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const newSettings = {
        width: document.getElementById('width').value,
        height: document.getElementById('height').value,
        scaleFactor: document.getElementById('scaleFactor').value,
      };
      window.settingsApi.save(newSettings);
    });

    cancelBtn.addEventListener('click', () => window.settingsApi.cancel());
    closeBtn.addEventListener('click', () => window.settingsApi.cancel());
  </script>
</body>
</html>